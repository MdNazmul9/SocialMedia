{% extends "base.html" %}

{% block head_title%}
 home
{% endblock head_title%}
{% block content %}

<h1> Hello world <h1>
<div id= "tweets">
Replace me
</div>




<script>
const tweetsElement = document.getElementById("tweets")
tweetsElement.innerHTML = 'Loading...'


{% comment %} 
var elem2 = "<h1> hi2 </h1>"
var elem3 = "<h1> hi3 </h1>"
tweetsElement.innerHTML = elem1 + elem2 + elem3
 {% endcomment %}



const xhr = new XMLHttpRequest()
const method = 'GET'  //"POST"
const url = "/tweets"
const responseType = "json"
xhr.responseType = responseType

xhr.open(method,   url)
xhr.onload = function() {
    const serverResponse = xhr.response
    var ListItems = serverResponse.response
    var finalTweetStr = ""
    var i;
    for(i = 0; i<ListItems.length;i++){
        console.log(i)
        console.log(ListItems[i])
        var currentItem = "<div class='mb-1'><h4>" + ListItems[i].id + "</h4>" + "<p>" + ListItems[i].content + "</p></div>"
        finalTweetStr += currentItem

    }
  tweetsElement.innerHTML = finalTweetStr

    //console.log(ListItems)
    //console.log(xhr.response)
}
xhr.send()
</script>

{% endblock content %}